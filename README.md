# Магическая нумерация v2.0

## Автонумерация кадров в G-code файле (программа для чпу станка)
### Инструкция:
- Склонируйте репозиторий
- Соберите решение в вашей IDE и запустите исполняемый файл
- Выберите режим нумерации кадров вводом числа\
  В настоящий момент поддерживаются 4 режима:\
  1\. Waldrich Coburg\
  2\. Skoda HCW3\
  3\. Ручной ввод\
  4\. Удалить нумерацию
  
  Режимы `1` и `2` - частные случаи для одноименных чпу станков.\
  Правила нумерации кадров в них задаются автоматически\
  и из файла могут быть удалены строки, содержащие опереденные фрагменты.\
  Для общего случая выберите режим `3` или `4`.
- Введите полное имя файла (включая путь). В качестве примера можно взять файл `test prog.ppp`\
  Можно использовать механизм `Drag-and-Drop`, просто перетащите G-code файл на приложение
- При выборе режима `1` (Waldrich Coburg) дополнительно укажите,\
  является ли текущий файл подпрограммой. Если ответить утвердительно `y`,\
  то строка с именем подпрограммы, например, `L10000`, `L30000` не будет подлежать нумерации
- При выборе режима `2` (Skoda HCW3) дополнительно к автонумерации\
  из файла удалятся строки, содержащие слова из вектора`extra_strings`\
  Измените этот список в исходном коде при необходимости.\
  В качестве примера, демонстрирующего поведение данного режима, воспользоуйтесь файлом `test_skoda.mpf`
- При выборе режима `3` (Ручной ввод):
  - Введите стартовый номер N-последовательности, например, `5`
  - Введите инкремент, например, `2`
  - Введите количество разрядов\
  Например, для вывода `N0026...` введите `4`, для `N00026...` введите `5`

- Файл перезапишется, его строки будут с нумерацией кадров или без таковой
- Можно продолжить работу с новым файлом или выйти по нажатию клавиши `Esc`

### Особенности:
- использование регуряных выражений для поиска и замены текста
- проверка на ввод целых положительных чисел и определенных символов
- форматированный вывод целых чисел через манипуляторы и поток `stringstream`
- поддержка символов кириллицы и пробелов в пути и имени файла
- выход из программы по нажатию клавиши `Esc`
<br/><br/>

> Примечания:
> 1. Выбранный в начале режим будет активен для каждого вновь загруженного файла.\
     Для изменения режима перезапустите приложение.
> 2. Строка, начинающаяся с `%` не подлежит нумерации, т.к. это служебная команда стойки с чпу.
> 3. Строки, начинающиеся с `(` или `;` это комментарии и также не подлежат нумерации для удобства.
> 4. Строки, содержащие одиночные номера кадров, пустые строки или только с пробелами удаляются.
> 5. Строки типа `N125G01 X100...`, в которых нет пробела после номера кадра обрабатываются корректно.
> 6. При перетаскивании файла на приложение, если его имя или путь содержат длинное тире `—`.\
>    Оно может отобразиться как короткое (зависит от версии Windows) и файл не будет найден.\
>    Удалите символ длинного тире или замените его на любой другой, например, дефис `-`.\
>    Длинное тире автоматически добавляется при создании копий файла (`Ctrl+C` `Ctrl+V`)

### Лицензия
Распространяется под лицензией GNU GPL v3.0. \
Дополнительную информацию см. в LICENSE.txt
